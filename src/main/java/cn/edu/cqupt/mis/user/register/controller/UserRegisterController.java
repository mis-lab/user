package cn.edu.cqupt.mis.user.register.controller;import cn.edu.cqupt.mis.user.common.StatusCode;import cn.edu.cqupt.mis.user.register.model.UserRegisterMessage;import cn.edu.cqupt.mis.user.register.service.UserRegisterService;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import io.swagger.annotations.*;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RestController;import javax.servlet.http.HttpSession;import java.util.HashMap;import java.util.Map;/** * @author:dengsiyuan * @Date:2018/9/29 10:08 */@Api("用户注册模块")@RestControllerpublic class UserRegisterController {    @Autowired    private UserRegisterService userRegisterService;    @ApiOperation("用户注册")    @ApiResponses({            @ApiResponse(code = 0,message = "该功能存在异常"),            @ApiResponse(code = 1,message = "注册成功"),            @ApiResponse(code = 2,message = "注册失败"),            @ApiResponse(code = 3,message = "传值为空"),            @ApiResponse(code = 4,message = "验证码错误"),            @ApiResponse(code = 5,message = "该邮箱已存在"),            @ApiResponse(code = 6,message = "该id已存在")    })    @RequestMapping(value = "/user",method = RequestMethod.POST)    public Object userRegister(@RequestBody UserRegisterMessage userRegisterMessage, HttpSession session){        Map map = new HashMap<String,String>(16);        String mailAttribute = "mailCode";        try {            String mailCode = userRegisterMessage.getUserMailCode().getMailCode();            if(userRegisterMessage != null){                if(mailCode.equals(session.getAttribute(mailAttribute))){                    map.put("status",userRegisterService.userRegister(userRegisterMessage));                }else {                    map.put("status", StatusCode.CODE_FAIL);                }            }else {                map.put("status",StatusCode.MESSAGE_NULL);            }        }catch (Exception e){            e.printStackTrace();            map.put("status",StatusCode.FAIL);        }        return map;    }}